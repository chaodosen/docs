import{_ as e,c as o,o as a,D as s}from"./app.4993e908.js";const y=JSON.parse('{"title":"npm淘宝镜像延迟","description":"","frontmatter":{"title":"npm淘宝镜像延迟","date":"2022-11-23T00:00:00.000Z","categories":["前端"],"tags":["npm","淘宝镜像"]},"headers":[{"level":2,"title":"问题的开始","slug":"问题的开始","link":"#问题的开始","children":[]},{"level":2,"title":"^和~的区别","slug":"和-的区别","link":"#和-的区别","children":[]},{"level":2,"title":"^和~的设置","slug":"和-的设置","link":"#和-的设置","children":[]},{"level":2,"title":"官方镜像与淘宝镜像","slug":"官方镜像与淘宝镜像","link":"#官方镜像与淘宝镜像","children":[]}],"relativePath":"bugs/npm-taobao-mirror-delay.md","lastUpdated":1676195687000}'),l={name:"bugs/npm-taobao-mirror-delay.md"},t=s(`<div class="danger custom-block"><p class="custom-block-title">DANGER</p><p><em>起初，我也不过是以为是一个简单的BUG</em></p></div><h2 id="问题的开始" tabindex="-1">问题的开始 <a class="header-anchor" href="#问题的开始" aria-hidden="true">#</a></h2><p>公司同事让我帮忙打包一个项目的前端包(<code>我是后端</code>)，由于太久没拉过代码，代码冲突了，我重新从云端拉了新的代码，下载依赖，此时并没有任何问题，构建运行的时候，报了这个错</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p><strong>Syntax Error: TypeError: Cannot set property &#39;parent&#39; of undefined</strong></p></div><p>百度结果说<code>vue</code>版本号去掉 <code>^</code></p><h2 id="和-的区别" tabindex="-1">^和~的区别 <a class="header-anchor" href="#和-的区别" aria-hidden="true">#</a></h2><p><a href="https://docs.npmjs.com/cli/v6/using-npm/semver#tilde-ranges-123-12-1" target="_blank" rel="noreferrer">npm官方说明</a>如下：</p><p><strong>Tilde Ranges <code>~1.2.3</code> <code>~1.2</code> <code>~1</code></strong></p><p>Allows patch-level changes if a minor version is specified on the comparator. Allows minor-level changes if not.</p><ul><li><code>~1.2.3</code> := <code>&gt;=1.2.3 &lt;1.(2+1).0</code> := <code>&gt;=1.2.3 &lt;1.3.0-0</code></li><li><code>~1.2</code> := <code>&gt;=1.2.0 &lt;1.(2+1).0</code> := <code>&gt;=1.2.0 &lt;1.3.0-0</code> (Same as <code>1.2.x</code>)</li><li><code>~1</code> := <code>&gt;=1.0.0 &lt;(1+1).0.0</code> := <code>&gt;=1.0.0 &lt;2.0.0-0</code> (Same as <code>1.x</code>)</li><li><code>~0.2.3</code> := <code>&gt;=0.2.3 &lt;0.(2+1).0</code> := <code>&gt;=0.2.3 &lt;0.3.0-0</code></li><li><code>~0.2</code> := <code>&gt;=0.2.0 &lt;0.(2+1).0</code> := <code>&gt;=0.2.0 &lt;0.3.0-0</code> (Same as <code>0.2.x</code>)</li><li><code>~0</code> := <code>&gt;=0.0.0 &lt;(0+1).0.0</code> := <code>&gt;=0.0.0 &lt;1.0.0-0</code> (Same as <code>0.x</code>)</li><li><code>~1.2.3-beta.2</code> := <code>&gt;=1.2.3-beta.2 &lt;1.3.0-0</code> Note that prereleases in the <code>1.2.3</code> version will be allowed, if they are greater than or equal to <code>beta.2</code>. So, <code>1.2.3-beta.4</code> would be allowed, but <code>1.2.4-beta.2</code> would not, because it is a prerelease of a different <code>[major, minor, patch]</code> tuple.</li></ul><p><strong>Caret Ranges <code>^1.2.3</code> <code>^0.2.5</code> <code>^0.0.4</code></strong></p><p>Allows changes that do not modify the left-most non-zero element in the <code>[major, minor, patch]</code> tuple. In other words, this allows patch and minor updates for versions <code>1.0.0</code> and above, patch updates for versions <code>0.X &gt;=0.1.0</code>, and <em>no</em> updates for versions <code>0.0.X</code>.</p><p>Many authors treat a <code>0.x</code> version as if the <code>x</code> were the major &quot;breaking-change&quot; indicator.</p><p>Caret ranges are ideal when an author may make breaking changes between <code>0.2.4</code> and <code>0.3.0</code> releases, which is a common practice. However, it presumes that there will <em>not</em> be breaking changes between <code>0.2.4</code> and <code>0.2.5</code>. It allows for changes that are presumed to be additive (but non-breaking), according to commonly observed practices.</p><ul><li><code>^1.2.3</code> := <code>&gt;=1.2.3 &lt;2.0.0-0</code></li><li><code>^0.2.3</code> := <code>&gt;=0.2.3 &lt;0.3.0-0</code></li><li><code>^0.0.3</code> := <code>&gt;=0.0.3 &lt;0.0.4-0</code></li><li><code>^1.2.3-beta.2</code> := <code>&gt;=1.2.3-beta.2 &lt;2.0.0-0</code> Note that prereleases in the <code>1.2.3</code> version will be allowed, if they are greater than or equal to <code>beta.2</code>. So, <code>1.2.3-beta.4</code> would be allowed, but <code>1.2.4-beta.2</code> would not, because it is a prerelease of a different <code>[major, minor, patch]</code> tuple.</li><li><code>^0.0.3-beta</code> := <code>&gt;=0.0.3-beta &lt;0.0.4-0</code> Note that prereleases in the <code>0.0.3</code> version <em>only</em> will be allowed, if they are greater than or equal to <code>beta</code>. So, <code>0.0.3-pr.2</code> would be allowed.</li></ul><p>When parsing caret ranges, a missing <code>patch</code> value desugars to the number <code>0</code>, but will allow flexibility within that value, even if the major and minor versions are both <code>0</code>.</p><ul><li><code>^1.2.x</code> := <code>&gt;=1.2.0 &lt;2.0.0-0</code></li><li><code>^0.0.x</code> := <code>&gt;=0.0.0 &lt;0.1.0-0</code></li><li><code>^0.0</code> := <code>&gt;=0.0.0 &lt;0.1.0-0</code></li></ul><p>A missing <code>minor</code> and <code>patch</code> values will desugar to zero, but also allow flexibility within those values, even if the major version is zero.</p><ul><li><code>^1.x</code> := <code>&gt;=1.0.0 &lt;2.0.0-0</code></li><li><code>^0.x</code> := <code>&gt;=0.0.0 &lt;1.0.0-0</code></li></ul><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p><strong>总结：如果想要自动修复补丁则使用 Tilde ~,如果不想改变大的版本又想使用较新的版本则使用 Caret ^。</strong></p></div><h2 id="和-的设置" tabindex="-1">^和~的设置 <a class="header-anchor" href="#和-的设置" aria-hidden="true">#</a></h2><p><a href="https://docs.npmjs.com/cli/v9/using-npm/config#save-prefix" target="_blank" rel="noreferrer">官网说明</a></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">save-prefix=</span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#A6ACCD;">	</span><span style="color:#C3E88D;">//固定版本</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">save-prefix=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">~</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">	</span><span style="color:#C3E88D;">//自动修复补丁</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">save-prefix</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">^	//较新版本，注意有空格</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">npm </span><span style="color:#98C379;">config</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">set</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">save-prefix=&#39;&#39;</span><span style="color:#ABB2BF;">	</span><span style="color:#98C379;">//固定版本</span></span>
<span class="line"><span style="color:#ABB2BF;">npm </span><span style="color:#98C379;">config</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">set</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">save-prefix=&#39;~&#39;</span><span style="color:#ABB2BF;">	</span><span style="color:#98C379;">//自动修复补丁</span></span>
<span class="line"><span style="color:#ABB2BF;">npm </span><span style="color:#98C379;">config</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">set</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">save-prefix</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">^	//较新版本，注意有空格</span></span>
<span class="line"></span></code></pre></div><h2 id="官方镜像与淘宝镜像" tabindex="-1">官方镜像与淘宝镜像 <a class="header-anchor" href="#官方镜像与淘宝镜像" aria-hidden="true">#</a></h2><p><a href="https://registry.npmjs.org/" target="_blank" rel="noreferrer">官方镜像</a></p><p><a href="https://registry.npmmirror.com/" target="_blank" rel="noreferrer">淘宝镜像</a></p><ul><li>经过排查，发现前端同事的电脑可以正常运行与构建，代码与我的完全一样</li><li>我把我本地中的<code>^</code>去掉之后 ，发现居然不报错了，这就奇了个怪了，</li><li>然后我把同事电脑的依赖删除，重新安装，发现不报错，卧槽？</li><li>然后我查看了同事电脑的仓库地址是 <code>npm</code>默认的官方镜像，又看了下我的，发现是 <code>淘宝镜像</code> 这就不奇怪了，这就不奇怪了</li><li>我把本地改成官方镜像 重新带上 <code>^</code> 安装测试，发现果然不报错了，那就是说，官方镜像和淘宝镜像有出入</li><li>后来我又改回了淘宝镜像，版本号也带上了<code>^</code> ，居然也不报错了</li><li>淘宝镜像比官方镜像延迟，这是无可厚非的，</li></ul><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p><strong>当我第一次使用淘宝镜像安装依赖的时候，淘宝镜像同步尚未完成，报错原因是因为依赖之间的关系不完善，第二次安装可以成功，说明淘宝镜像已经同步完成。以上仅代表个人看法，如有错误，请指正！</strong></p></div>`,28),c=[t];function n(d,r,p,i,h,g){return a(),o("div",null,c)}const u=e(l,[["render",n]]);export{y as __pageData,u as default};
